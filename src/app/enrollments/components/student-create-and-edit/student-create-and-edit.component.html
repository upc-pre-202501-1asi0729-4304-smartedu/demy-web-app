<form #studentForm="ngForm" (ngSubmit)="onSubmit()" class="student-form">
  <h2>{{ editMode ? 'Editar Estudiante': 'Nuevo Estudiante' }}</h2>

  <div class="form-row">
    <mat-form-field appearance="outline" class="form-field">
      <mat-label>DNI</mat-label>
      <input matInput required [(ngModel)]="student.dni" name="dni" #dni="ngModel" maxlength="8" pattern="[0-9]{8}">
      @if (dni.invalid && (dni.dirty || dni.touched)) {
        <mat-error>DNI debe tener 8 dígitos numéricos</mat-error>
      }
    </mat-form-field>
  </div>

  <div class="form-row">
    <mat-form-field appearance="outline" class="form-field">
      <mat-label>Nombres</mat-label>
      <input matInput required [(ngModel)]="student.firstName" name="first_name" #firstName="ngModel">
      @if (firstName.invalid && (firstName.dirty || firstName.touched)) {
        <mat-error>Nombres es requerido</mat-error>
      }
    </mat-form-field>
  </div>

  <div class="form-row">
    <mat-form-field appearance="outline" class="form-field">
      <mat-label>Apellidos</mat-label>
      <input matInput required [(ngModel)]="student.lastName" name="last_name" #lastName="ngModel">
      @if (lastName.invalid && (lastName.dirty || lastName.touched)) {
        <mat-error>Apellidos es requerido</mat-error>
      }
    </mat-form-field>
  </div>

  <div class="form-row">
    <mat-form-field appearance="outline" class="form-field">
      <mat-label>Sexo</mat-label>
      <mat-select required [(ngModel)]="student.sex" name="sex" #sex="ngModel">
        @for (option of sexOptions; track option.value) {
          <mat-option [value]="option.value">
            {{option.viewValue}}
          </mat-option>
        }
      </mat-select>
      @if (sex.invalid && (sex.dirty || sex.touched)) {
        <mat-error>Sexo es requerido</mat-error>
      }
    </mat-form-field>
  </div>

  <div class="form-row">
    <mat-form-field appearance="outline" class="form-field">
      <mat-label>Fecha de Nacimiento</mat-label>
      <input matInput required [(ngModel)]="student.birthDate" name="birth_date" #birthDate="ngModel" type="date">
      @if (birthDate.invalid && (birthDate.dirty || birthDate.touched)) {
        <mat-error>Fecha de nacimiento es requerida</mat-error>
      }
    </mat-form-field>
  </div>

  <div class="form-row">
    <mat-form-field appearance="outline" class="form-field">
      <mat-label>Dirección</mat-label>
      <input matInput required [(ngModel)]="student.address" name="address" #address="ngModel">
      @if (address.invalid && (address.dirty || address.touched)) {
        <mat-error>Dirección es requerida</mat-error>
      }
    </mat-form-field>
  </div>

  <div class="form-row">
    <mat-form-field appearance="outline" class="form-field">
      <mat-label>Teléfono</mat-label>
      <input matInput required [(ngModel)]="student.phoneNumber" name="phone_number" #phoneNumber="ngModel" pattern="[0-9]{9}">
      @if (phoneNumber.invalid && (phoneNumber.dirty || phoneNumber.touched)) {
        <mat-error>Teléfono debe tener 9 dígitos numéricos</mat-error>
      }
    </mat-form-field>
  </div>

  <div class="form-actions">
    <button mat-raised-button color="primary" type="submit" [disabled]="!studentForm.valid">
      {{ isEditMode() ? 'Actualizar Estudiante' : 'Registrar Estudiante'}}
    </button>
    <button mat-button type="button" (click)="onCancel()">Cancelar</button>
  </div>
</form>
